---
title: "LuaLaTeXをとりあえず使ってみる"
date: 2021-06-19T14:20:07+09:00
tags:
  - LaTeX
  - LuaLaTeX
---

なんでも [pLaTeX が本格的にやばいかも](https://acetaminophen.hatenablog.com/entry/2021/06/18/022108)
らしい。pLaTeXやばいやばい話はこれまで何度も聞いた気がする。
ちょっと前に SATySFi 使ったりしたけど、あれはちゃんと SATySFi 書けないとあんまり満足度高くないので
まあのんびり習得していけたらいいやと。

そういうわけで、とりあえず LuaLaTeX を使えるようにしておく。

## LuaLaTeX について

TeX を再実装した LuaTeX というやつに LaTeX のパッケージを乗っけたもの………だと思う。
あんまり正確なことは把握してないので気になった方はマサカリ投げてください…………。

まあ見た目は Lua が使える LaTeX という感じ。僕は Lua は日常会話レベル (ほんとか？) だけど
TeX は海外旅行に行ったときに身振り手振りでなんとか意思疎通するレベルなので
Lua が使えるのはけっこう嬉しい…気がする。

というか地獄の TeX 言語を再実装なんてできるんだなという。

## 移行

特に複雑なことをしていなければ、`documentclass` を `lt` 系のもの (`ltjsarticle` などなど) に取り替えれば
良いと思う。
これだけで tcolorbox とかのグラフィック系のパッケージも動くし、
画像もちゃんと貼れる。

## Lua を使う

`\directlua{...}` で Lua のコードが書けるけどこれが曲者で、完全に展開された後に
Lua の式として評価されるらしい。
(展開されるとか書いてあったのでマクロみたいな TeX のコマンドとは独立したものなのかと
思ったらそういうわけでもなさそうだった)。

てなわけで `luacode` パッケージの `luacode*` 環境に書くのが快適な方法とか。

Lua から TeX に書き出すときは `tex.sprint` とかを使うみたい。

#### 参考

- https://acetaminophen.hatenablog.com/entry/2021/06/18/022108
- https://qiita.com/zr_tex8r/items/af2905bc93ac2c936a67
